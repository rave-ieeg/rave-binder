#!/bin/bash

rscript="/srv/conda/envs/notebook/bin/R -e"
rscript_clean="$rscript --no-restore --no-save"
libpath="/srv/conda/envs/notebook/lib/R/library"

$rscript_clean "install.packages(\"ravemanager\",repos=\"https://rave-ieeg.r-universe.dev\",lib=\"$libpath\")"
$rscript_clean "install.packages(\"threeBrain\",repos=\"https://rave-ieeg.r-universe.dev\",lib=\"$libpath\")"
$rscript_clean "install.packages(\"readNSx\",repos=\"https://rave-ieeg.r-universe.dev\",lib=\"$libpath\")"
$rscript_clean "install.packages(\"rpymat\",repos=\"https://rave-ieeg.r-universe.dev\",lib=\"$libpath\")"
$rscript_clean "install.packages(\"rpyANTs\",repos=\"https://rave-ieeg.r-universe.dev\",lib=\"$libpath\")"
$rscript_clean "install.packages(\"ieegio\",repos=\"https://rave-ieeg.r-universe.dev\",lib=\"$libpath\")"
$rscript_clean "install.packages(\"ravepipeline\",repos=\"https://rave-ieeg.r-universe.dev\",lib=\"$libpath\")"
$rscript_clean "install.packages(\"raveio\",repos=\"https://rave-ieeg.r-universe.dev\",lib=\"$libpath\")"
$rscript_clean "install.packages(\"ravedash\",repos=\"https://rave-ieeg.r-universe.dev\",lib=\"$libpath\")"

$rscript 'threeBrain::threebrain_finalize_installation(upgrade = "config-only", async = FALSE)'
$rscript 'ravepipeline::ravepipeline_finalize_installation(upgrade = "config-only", async = FALSE)'
